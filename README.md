# ğŸ’° Saldo FÃ¡cil - Controle Financeiro Anual Inteligente

Um **Progressive Web App (PWA)** moderno para controle financeiro pessoal anual, disponÃ­vel na web, Android, iOS e desktop. Gerencie receitas, despesas, investimentos e cartÃ£o de crÃ©dito com relatÃ³rios inteligentes e anÃ¡lise com IA (Groq Llama 3.1).

## ğŸŒ Acesse Agora

| Plataforma | Link | Status |
|-----------|------|--------|
| **Web** | [https://saldofacil.vercel.app](https://saldofacil.vercel.app) | âœ… Ativo |
| **Android** | [Play Store](https://play.google.com/store/apps/details?id=com.autossuficiencia) | âœ… Ativo |
| **iOS/Mac** | Acesse pelo link web | âœ… CompatÃ­vel |
| **Desktop (PWA)** | Instale pelo navegador | âœ… Recomendado |

---

## ğŸ¯ O que Ã© Saldo FÃ¡cil?

Controle financeiro claro e organizado em uma Ãºnica plataforma. **Saldo FÃ¡cil** Ã© a ferramenta perfeita para quem quer entender seus fluxos de caixa ao longo do ano, permitindo:

- ğŸ“Š **LanÃ§ar receitas e despesas** com categorizaÃ§Ã£o automÃ¡tica por descriÃ§Ã£o
- ğŸ’³ **Gerenciar cartÃ£o de crÃ©dito** com distribuiÃ§Ã£o automÃ¡tica de parcelas
- ğŸ“ˆ **Acompanhar investimentos** com simulaÃ§Ãµes de rendimento
- ğŸ“‹ **RelatÃ³rios detalhados** com grÃ¡ficos e tendÃªncias
- ğŸ¤– **AnÃ¡lise com IA** (Groq Llama 3.1) - pergunte seus dados financeiros
- ğŸ“¥ **Importar extratos** em formato OFX (banco a banco)
- ğŸ“‘ **Exportar** em PDF ou Excel com um clique
- ğŸ’± **ConversÃ£o de moedas** em tempo real (USD, EUR, GBP)
- ğŸ“± **Funcionar offline-ready** com PWA (dados sincronizam ao voltar online)

---

## ğŸ“š Guia de Uso PrÃ¡tico

### Como ComeÃ§ar?

1. **Registre um saldo inicial** no mÃªs de Janeiro (campo "Saldo Inicial")
   - Mesmo que seus lanÃ§amentos comecem depois, o app precisa de um ponto de partida

2. **Adicione suas transaÃ§Ãµes** no campo "Fazer lanÃ§amentos"
   - Preencha: dia da operaÃ§Ã£o, descriÃ§Ã£o (importante!) e valor
   - CrÃ©ditos = o que entra | DÃ©bitos = o que sai

3. **Os meses subsequentes** sÃ£o preenchidos automaticamente
   - O saldo inicial de cada mÃªs Ã© o saldo final do anterior

### ğŸ’¡ Dicas para MÃ¡xima Utilidade

#### Planejamento Anual Inteligente
```
ğŸ“‹ Melhor prÃ¡tica: LanÃ§ar TODOS os valores fixos e gastos previstos do ano
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RECEITAS FIXAS:                                           â”‚
â”‚  â€¢ SalÃ¡rio mensal                                         â”‚
â”‚  â€¢ Rentabilidade de investimentos (mensalizada)           â”‚
â”‚  â€¢ Outras receitas recorrentes                            â”‚
â”‚                                                            â”‚
â”‚ DESPESAS FIXAS:                                           â”‚
â”‚  â€¢ Aluguel/Hipoteca                                       â”‚
â”‚  â€¢ Internet, Ã¡gua, luz, gÃ¡s                               â”‚
â”‚  â€¢ Seguros (auto, residencial, saÃºde)                     â”‚
â”‚  â€¢ Parcelas de emprÃ©stimos/financiamentos                 â”‚
â”‚  â€¢ Assinaturas (streaming, apps, etc)                     â”‚
â”‚                                                            â”‚
â”‚ RESULTADO: VisÃ£o 360Âº de quanto sobra/falta cada mÃªs      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Contas VariÃ¡veis (Estimativa â†’ Realidade)
- **Primeira lanÃ§ada:** Estime por histÃ³rico do ano anterior
- **Conta chega:** Clique "Editar" e insira o valor real
- **AutomÃ¡tico:** App recalcula saldos instantaneamente
- **Resultado:** Controle evoluindo conforme dados reais

#### ğŸ¯ DescriÃ§Ãµes Consistentes (CRÃTICO)
O app agrupa transaÃ§Ãµes por descriÃ§Ã£o **exatamente igual**:

```
âŒ ERRO COMUM:
  â€¢ "SalÃ¡rio" (jan)
  â€¢ " SalÃ¡rio" (fev) â† espaÃ§o extra
  â€¢ "Salario" (mar) â† sem acento
â†’ App reconhece como 3 descriÃ§Ãµes diferentes
â†’ RelatÃ³rio nÃ£o agrupa corretamente!

âœ… SOLUÃ‡ÃƒO:
  â€¢ Sempre "SalÃ¡rio" (mesma ortografia)
  â€¢ Copiar/colar descriÃ§Ã£o dos meses anteriores
  â€¢ Usar lista de "descriÃ§Ãµes recentes" para autocomplete
â†’ App agrupa e soma corretamente no RelatÃ³rio
```

---

## ğŸ’³ GestÃ£o de CartÃ£o de CrÃ©dito

### Como Funciona?

1. **Registre a compra** com:
   - DescriÃ§Ã£o (ex: "Compra Shopee")
   - Valor total
   - NÃºmero de parcelas
   - MÃªs da compra

2. **Parcelas sÃ£o distribuÃ­das automaticamente:**
   - 1Âª parcela no mÃªs selecionado
   - Demais parcelas nos meses subsequentes
   - Exemplo: Compra em Jan com 12x â†’ parcelas de Jan a Dez

3. **Fatua integrada ao saldo:**
   - Total mensal de parcelas Ã© **automaticamente descontado** do saldo
   - Aparece no resultado final de caixa

### âš ï¸ ObservaÃ§Ãµes Importantes

- âœ… Parcelas dentro do mesmo ano funcionam perfeitamente
- âš ï¸ **Parcelas que ultrapassam dezembro nÃ£o sÃ£o criadas** (por design - prÃ³ximo ano tem seus prÃ³prios dados)
- ğŸ’¡ **Dica:** Para janeiro com 12 parcelas, use 11 para nÃ£o exceder o ano fiscal

---

## ğŸ“Š RelatÃ³rios e AnÃ¡lises AvanÃ§adas

### ğŸ“„ Tipos de RelatÃ³rios

| RelatÃ³rio | Visualiza | Usa |
|-----------|-----------|-----|
| **LanÃ§amentos** | Todas as transaÃ§Ãµes do mÃªs com detalhes | PÃ¡gina "Fazer LanÃ§amentos" |
| **Consolidado Mensal** | Subtotais, saldos, cartÃ£o, investimentos | PÃ¡gina "RelatÃ³rio" |
| **Consolidado Anual** | Resumo de todos os 12 meses | PÃ¡gina "RelatÃ³rio Anual" |
| **DÃ­zimos** | Acumulado de contribuiÃ§Ãµes por mÃªs e anual | PÃ¡gina "DÃ­zimos" |
| **GrÃ¡ficos** | VisualizaÃ§Ãµes e tendÃªncias | PÃ¡gina "GrÃ¡ficos" |

### ğŸ“ˆ GrÃ¡ficos DisponÃ­veis

- **CrÃ©dito vs DÃ©bito:** Barras comparando receitas Ã— despesas mensalmente
- **EvoluÃ§Ã£o do Saldo:** Linhas mostrando tendÃªncia de caixa ao longo do ano
- **TendÃªncia QuadrÃ¡tica:** ProjeÃ§Ã£o de padrÃ£o financeiro futuro
- **Comparativo Anual:** Dezembro entre anos anteriores (histÃ³rico)
- **DistribuiÃ§Ã£o de Gastos:** Pizza de categorias (por descriÃ§Ã£o)

### ğŸ’± ConversÃ£o de Moedas
- **Real (BRL)** - PadrÃ£o do app
- **DÃ³lar (USD)**
- **Euro (EUR)**
- **Libra (GBP)**
- CotaÃ§Ãµes atualizadas em tempo real via API externa

### ğŸ“¥ ğŸ“¤ ExportaÃ§Ã£o

âœ… **Funciona em TODOS os dispositivos:**
- Desktop (Windows, Mac, Linux)
- Mobile (Android, iOS)
- PWA instalado

**Exportar para:**
- ğŸ“Š **Excel** - Planilha formatada com cÃ¡lculos
- ğŸ“„ **PDF** - RelatÃ³rio visual pronto para imprimir/compartilhar

---

## ğŸ¤– AnÃ¡lise Inteligente com IA (Groq Llama 3.1)

### Como Usar?

Acesse a pÃ¡gina **"Perguntando para IA"** e faÃ§a qualquer pergunta sobre seus dados financeiros:

**Exemplos de perguntas:**
- "Quanto gastei em alimentaÃ§Ã£o este mÃªs?"
- "Qual foi meu maior gasto no Ãºltimo trimestre?"
- "Em qual categoria devo economizar mais?"
- "Qual foi minha receita total em 2025?"
- "Como estou me saindo financeiramente?"
- "Qual Ã© minha taxa de poupanÃ§a mensal?"
- "Compare meus gastos com mÃªs anterior"

### Tecnologia & Privacidade

- **Modelo:** Groq (Llama 3.1) - Ultra-rÃ¡pido, respostas em < 1 segundo
- **Contexto:** Acesso a TODOS seus dados (transaÃ§Ãµes, cartÃ£o, investimentos, dÃ­zimos)
- **Processamento:** Lado do servidor (seus dados nÃ£o sÃ£o armazenados)
- **Privacidade:** Cada consulta Ã© independente, sem histÃ³rico persistente
- **Erro comum:** DescriÃ§Ãµes inconsistentes resultam em anÃ¡lises imprecisas (volte ao tip acima!)

### âš ï¸ Importante
- IA analisa base nos dados reais â†’ dados incompletos = anÃ¡lise incompleta
- Sempre revise os nÃºmeros apresentados manualmente
- Use para insights, nÃ£o como aconselhamento financeiro profissional

---

## ğŸ“¥ Importar Extratos BancÃ¡rios (OFX)

### Como Importar?

1. **Baixe seu extrato em OFX** do site/app do seu banco
   - Geralmente em: "Extrato" â†’ "Baixar" â†’ "Formato OFX"
   - VÃ¡lido tambÃ©m para extratos de investimento

2. **No app:** Navegue atÃ© o mÃªs correspondente
3. **Clique em "Importar Extrato"** (card de lanÃ§amentos)
4. **Selecione o arquivo OFX**
5. **Revise** as transaÃ§Ãµes importadas antes de confirmar

### âœ… Bancos Testados e Funcionando

- âœ… **Nubank** - Funciona perfeitamente
- âœ… **Caixa EconÃ´mica** - Funciona
- âœ… **Banco do Brasil** - Funciona
- âœ… **Bradesco, ItaÃº** - Muito provÃ¡vel que funcione (nÃ£o testado)
- âš ï¸ **Outros bancos** - Podem funcionar, depende do formato OFX

### âš ï¸ LimitaÃ§Ãµes

- ğŸ“± **NÃ£o disponÃ­vel em:** Android/iOS nativos (limitaÃ§Ã£o tÃ©cnica)
- ğŸ–¥ï¸ **DisponÃ­vel em:** Navegador web no desktop
- ğŸ“„ **Formato:** Apenas OFX (nÃ£o suporta CSV, PDF)
- ğŸš¨ **Valide:** Sempre revise os lanÃ§amentos importados (verificar valores e datas)

### ğŸ’¡ Dica de Ouro
ApÃ³s importar, as transaÃ§Ãµes aparecem com datas e descriÃ§Ãµes exatas do banco. Revise se as descriÃ§Ãµes estÃ£o consistentes com suas adiÃ§Ãµes manuais (regra de descriÃ§Ãµes iguais!).

---

## ğŸ—ï¸ Arquitetura TÃ©cnica

### Stack Principal

| Componente | Tecnologia | VersÃ£o | Motivo |
|-----------|-----------|--------|--------|
| **Framework** | React | 19.2.0 | UI moderna com hooks |
| **Roteamento** | React Router | 7.9.6 | Compatibilidade com WebView Android |
| **Build** | Vite | 7.2.4 | Performance otimizada |
| **Backend** | Firebase | Latest | AutenticaÃ§Ã£o + Realtime DB |
| **Banco de Dados** | Firebase Realtime DB | - | SincronizaÃ§Ã£o em tempo real |
| **AutenticaÃ§Ã£o** | Firebase Auth | - | Email/Senha + verificaÃ§Ã£o |
| **IA** | Groq (Llama 3.1) | Latest | AnÃ¡lise de dados financeiros |
| **GrÃ¡ficos** | Recharts | 3.5.1 | VisualizaÃ§Ãµes interativas |
| **ExportaÃ§Ã£o** | jsPDF + ExcelJS | Latest | PDF + Excel |
| **HTTP Client** | Fetch API | Native | RequisiÃ§Ãµes simples e rÃ¡pidas |

### Estrutura de Dados (Firebase Realtime Database)

```
users/
  â””â”€â”€ {uid}/
      â”œâ”€â”€ {year}/
      â”‚   â”œâ”€â”€ january/
      â”‚   â”‚   â”œâ”€â”€ initialBalance: "1000.00"
      â”‚   â”‚   â”œâ”€â”€ transactions: { 
      â”‚   â”‚   â”‚   "{uuid}": { 
      â”‚   â”‚   â”‚       date: "2025-01-15",
      â”‚   â”‚   â”‚       description: "SalÃ¡rio",
      â”‚   â”‚   â”‚       credit: "3000.00",
      â”‚   â”‚   â”‚       debit: "0",
      â”‚   â”‚   â”‚       tithe: false,
      â”‚   â”‚   â”‚       balance: "4000.00"
      â”‚   â”‚   â”‚   }
      â”‚   â”‚   â”‚ }
      â”‚   â”‚   â”œâ”€â”€ totalCredit: "5000.00"
      â”‚   â”‚   â”œâ”€â”€ totalDebit: "2000.00"
      â”‚   â”‚   â”œâ”€â”€ finalBalance: "4000.00"
      â”‚   â”‚   â”œâ”€â”€ percentage: "80.00"
      â”‚   â”‚   â”œâ”€â”€ creditCardBalance: "0.00"
      â”‚   â”‚   â”œâ”€â”€ investmentBalance: "0.00"
      â”‚   â”‚   â””â”€â”€ tithe: "500.00"
      â”‚   â”œâ”€â”€ february/, ... (outros meses)
      â”‚   â””â”€â”€ creditCardBalances/
      â”‚       â”œâ”€â”€ januaryCreditCardBalance: "250.00"
      â”‚       â””â”€â”€ ...
      â”‚
      â”œâ”€â”€ creditCardData/{year}/{cardId}/
      â”‚   â”œâ”€â”€ description: "iPhone 15"
      â”‚   â”œâ”€â”€ totalValue: "5000.00"
      â”‚   â”œâ”€â”€ installments: 12
      â”‚   â”œâ”€â”€ month: "January"
      â”‚   â””â”€â”€ purchaseDate: "2025-01-10"
      â”‚
      â””â”€â”€ investmentsData/{year}/{investmentId}/
          â”œâ”€â”€ description: "Fundo ImobiliÃ¡rio"
          â”œâ”€â”€ debitValue: "1000.00" (aporte)
          â”œâ”€â”€ creditValue: "50.00" (resgate)
          â”œâ”€â”€ month: "Janeiro 2025"
          â”œâ”€â”€ recurrence: 1 (recorrÃªncia em meses)
          â””â”€â”€ rate: "1.5" (taxa anual %)
```

**Chaves de mÃªs:** Sempre lowercase e em inglÃªs: `january`, `february`, `march`, ... `december`

### Estado Global (React Context API)

| Context | LocalizaÃ§Ã£o | Responsabilidades |
|---------|------------|------------------|
| **AuthContext** | `src/contexts/AuthContext.jsx` | UsuÃ¡rio autenticado, loading, email verificado |
| **YearContext** | `src/contexts/YearContext.jsx` | Ano selecionado (persistido em localStorage) |
| **MonthlyContext** | `src/contexts/MonthlyContext.jsx` | Dados do mÃªs (transaÃ§Ãµes, cartÃ£o, investimentos) |

### Roteamento

- **Router:** `HashRouter` (nÃ£o BrowserRouter) - Compatibilidade WebView Android
- **Rotas pÃºblicas:** `/login`, `/signup`, `/privacy`, `/email-verification`
- **Rotas protegidas:** Requerem `useAuth()` + `emailVerified = true`
- **Code-Splitting:** Lazy-loaded com `React.lazy()` + `Suspense`

---

## ğŸ” SeguranÃ§a, VerificaÃ§Ã£o de Email e Regras do Banco de Dados

### AutenticaÃ§Ã£o com Email Verification (Cloud Functions)

**O app implementa verificaÃ§Ã£o obrigatÃ³ria de email via Firebase Cloud Functions + Nodemailer + Gmail.**

#### ğŸ”„ Fluxo para Novo UsuÃ¡rio

```
1. UsuÃ¡rio preenche Signup (email + senha)
   â†“
2. Firebase cria conta: createUserWithEmailAndPassword()
   â†“
3. Cloud Function "sendVerificationEmail" dispara automaticamente
   â†“
4. Email enviado via Gmail (domÃ­nio confiÃ¡vel) â†’ Inbox âœ“
   â†“
5. PÃ¡gina de sucesso â†’ Redireciona para /email-verification apÃ³s 3s
   â†“
6. App comeÃ§a polling (a cada 1s): user.emailVerified?
   â†“
7. UsuÃ¡rio abre email em outra aba e clica link
   â†“
8. Firebase marca emailVerified = true
   â†“
9. App detecta (dentro de 1s) â†’ Redireciona para /login
```

#### ğŸ‘¤ UsuÃ¡rio Sem VerificaÃ§Ã£o (Login)

```
1. Tenta fazer login â†’ signInWithEmailAndPassword()
   â†“
2. App checa: user.emailVerified === false?
   â†“
3. Redireciona para /email-verification
   â†“
4. Link original do email ainda vÃ¡lido (24h)
   â†“
5. Clica link â†’ Polling detecta mudanÃ§a â†’ Redireciona para /login
```

#### ğŸ“§ Email Enviado

- **De:** seu@gmail.com (customizado, nÃ£o noreply@firebase.com)
- **Assunto:** âœ“ Verifique seu email - SaldoFÃ¡cil
- **ConteÃºdo:** Template HTML profissional com branding
- **Tempo:** 1-2 minutos para Inbox
- **Validade:** 24 horas

#### âš™ï¸ Setup das Cloud Functions (Primeira Vez)

```bash
# 1. Ativar AutenticaÃ§Ã£o em Duas Etapas no Gmail
#    https://myaccount.google.com/security

# 2. Gerar Senha de Aplicativo
#    https://myaccount.google.com/apppasswords
#    â†’ Selecione: Mail + seu OS

# 3. Configurar Firebase Functions (ambiente)
firebase functions:config:set gmail.email="seu@gmail.com" gmail.password="SENHA_AQUI"

# 4. Deploy das funÃ§Ãµes
firebase deploy --only functions

# 5. Monitorar logs (se necessÃ¡rio)
firebase functions:log --limit 50
```

**Arquivos envolvidos:**
- `functions/index.js` â†’ Cloud Functions para envio de email
- `functions/package.json` â†’ DependÃªncias (firebase-admin, nodemailer)
- `src/pages/Signup.jsx` â†’ Cria conta, CF envia email
- `src/pages/EmailVerification.jsx` â†’ Polling + redirecionamento
- `src/pages/Login.jsx` â†’ Detecta usuÃ¡rios nÃ£o verificados
- `src/contexts/AuthContext.jsx` â†’ Fornece estado `emailVerified`

### PrincÃ­pios de SeguranÃ§a

âœ… **AutenticaÃ§Ã£o obrigatÃ³ria** - Todos os dados requerem login  
âœ… **Isolamento por usuÃ¡rio** - Cada um vÃª apenas seus dados (`auth.uid`)  
âœ… **Email verificado** - Requisito para qualquer funcionalidade financeira  
âœ… **ValidaÃ§Ã£o servidor** - Tipos, ranges e estruturas verificados no Firebase  
âœ… **HTTPS** - Todos os dados criptografados em trÃ¢nsito  
âœ… **Sem logs** - Dados nÃ£o sÃ£o armazenados apÃ³s anÃ¡lise de IA  

### Regras de ValidaÃ§Ã£o (Firebase)

```
TransaÃ§Ãµes:
  â€¢ Valores nÃ£o-negativos
  â€¢ DescriÃ§Ã£o obrigatÃ³ria
  â€¢ Data vÃ¡lida (nÃ£o no futuro)

CartÃ£o de CrÃ©dito:
  â€¢ Parcelas > 0
  â€¢ Valor total > 0
  â€¢ MÃªs vÃ¡lido

Investimentos:
  â€¢ DÃ©bito/crÃ©dito >= 0
  â€¢ DescriÃ§Ã£o obrigatÃ³ria
  â€¢ Taxa de rendimento >= 0

DÃ­zimos:
  â€¢ Valores nÃ£o-negativos
```

---

## ğŸš€ Setup para Desenvolvimento

### PrÃ©-requisitos

- Node.js 18+ 
- npm ou yarn
- Conta Firebase com:
  - Realtime Database ativado
  - Authentication com Email/Senha ativado
  - Cloud Functions ativo (para email verification)

### 1ï¸âƒ£ InstalaÃ§Ã£o do Frontend

```bash
# Clone o repositÃ³rio
git clone <repo-url>
cd saldofacil-react

# Instale dependÃªncias
npm install

# Configure variÃ¡veis de ambiente (.env)
cp .env.example .env

# Preencha no .env:
VITE_FIREBASE_API_KEY=xxxxx
VITE_FIREBASE_AUTH_DOMAIN=xxxxx.firebaseapp.com
VITE_FIREBASE_DATABASE_URL=https://xxxxx.firebaseio.com
VITE_FIREBASE_PROJECT_ID=xxxxx
VITE_FIREBASE_STORAGE_BUCKET=xxxxx.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=xxxxx
VITE_FIREBASE_APP_ID=xxxxx
VITE_GROQ_API_KEY=xxxxx  # Opcional: para anÃ¡lise com IA

# Desenvolvimento local
npm run dev
# Abre http://localhost:5173 (HashRouter usa #/)

# Build produÃ§Ã£o
npm run build
# Output: dist/

# Verificar linting
npm run lint
```

### 2ï¸âƒ£ InstalaÃ§Ã£o das Cloud Functions (Email Verification)

```bash
# Instale Firebase CLI (se nÃ£o tiver)
npm install -g firebase-tools

# FaÃ§a login no Firebase
firebase login

# Gere senha de aplicativo no Gmail
# Acesse: https://myaccount.google.com/apppasswords
# 1. Ative Two-Factor Authentication primeiro
# 2. Selecione: Mail + seu Sistema Operacional
# 3. Copie a senha gerada

# Configure as credenciais no Firebase
firebase functions:config:set \
  gmail.email="seu@gmail.com" \
  gmail.password="sua_senha_16_caracteres"

# Instale dependÃªncias das functions
cd functions
npm install
cd ..

# Deploy das Cloud Functions
firebase deploy --only functions

# Acompanhe os logs (se necessÃ¡rio)
firebase functions:log --limit 50

# (Opcional) Emule localmente
firebase emulators:start --only functions
```

### Estrutura de Pastas

```
src/
â”œâ”€â”€ components/           # Componentes reutilizÃ¡veis
â”‚   â”œâ”€â”€ Card.jsx
â”‚   â”œâ”€â”€ Navigation.jsx
â”‚   â”œâ”€â”€ ProtectedRoute.jsx
â”‚   â”œâ”€â”€ SwipeableLayout.jsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ contexts/             # Context API (gerÃªncia de estado)
â”‚   â”œâ”€â”€ AuthContext.jsx
â”‚   â”œâ”€â”€ YearContext.jsx
â”‚   â””â”€â”€ MonthlyContext.jsx
â”œâ”€â”€ pages/                # PÃ¡ginas da aplicaÃ§Ã£o
â”‚   â”œâ”€â”€ Dashboard.jsx
â”‚   â”œâ”€â”€ MonthlyPage.jsx
â”‚   â”œâ”€â”€ CreditCard.jsx
â”‚   â”œâ”€â”€ Investments.jsx
â”‚   â”œâ”€â”€ AIReports.jsx
â”‚   â”œâ”€â”€ Charts.jsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ styles/               # CSS global
â”‚   â”œâ”€â”€ style.css
â”‚   â””â”€â”€ dashboard.css
â”œâ”€â”€ utils/                # FunÃ§Ãµes utilitÃ¡rias
â”‚   â”œâ”€â”€ helpers.js        # FormataÃ§Ã£o, parsing OFX, etc.
â”‚   â”œâ”€â”€ export.js         # ExportaÃ§Ã£o PDF/Excel
â”‚   â””â”€â”€ emailVerification.js
â”œâ”€â”€ config/               # ConfiguraÃ§Ãµes
â”‚   â””â”€â”€ firebase.js       # Setup Firebase
â”œâ”€â”€ App.jsx               # Componente raiz + Rotas
â””â”€â”€ main.jsx              # Entry point

functions/               # Cloud Functions (Node.js)
â”œâ”€â”€ index.js            # Trigger de email verification
â””â”€â”€ package.json
```

---

## ğŸ”§ Adicionando Novas Funcionalidades

### Adicionar uma Nova PÃ¡gina

1. Criar `src/pages/NovaPage.jsx`
2. Registrar em `App.jsx`:
   ```jsx
   const NovaPage = lazy(() => import('./pages/NovaPage'));
   // Em routes:
   <Route path="/nova-page" element={
     <ProtectedRoute>
       <Suspense fallback={<LoadingFallback />}>
         <NovaPage />
       </Suspense>
     </ProtectedRoute>
   } />
   ```
3. Usar contextos:
   ```jsx
   const { user } = useAuth();
   const { selectedYear } = useYear();
   ```
4. Se acessar dados mensais, usar padrÃ£o de Firebase listener

### Adicionar um Campo em TransaÃ§Ãµes

1. Atualizar `MonthlyPage.jsx` (buscar `uuidv4()`)
2. Atualizar escrita no Firebase: `set(ref(database, ...), { transactions: {...} })`
3. Atualizar cÃ¡lculos no `useEffect()`
4. Se for exportar, atualizar `utils/export.js`

---

## ğŸ“ PadrÃµes de CÃ³digo

### Mapeamento de Meses

```javascript
// helpers.js
monthsPT = ['Janeiro', 'Fevereiro', ..., 'Dezembro']  // ExibiÃ§Ã£o
monthsLowercase = ['january', 'february', ..., 'december']  // Firebase keys

// Converter:
monthsLowercase[monthIndex]  // Para queries
monthsPT[monthIndex]         // Para UI
```

### FormataÃ§Ã£o de Moeda

```javascript
import { formatCurrency } from './utils/helpers';

formatCurrency(1234.56, 'BRL')  // "R$ 1.234,56"
```

### Firebase Listener Pattern

```jsx
useEffect(() => {
  if (!user || !selectedYear) return;
  
  const monthRef = ref(database, `users/${user.uid}/${selectedYear}/january/`);
  const unsubscribe = onValue(monthRef, (snapshot) => {
    if (snapshot.exists()) {
      setMonthData(snapshot.val());
    }
  });
  
  return () => unsubscribe();  // âš ï¸ CRÃTICO: cleanup
}, [user, selectedYear]);
```

---

## âš ï¸ Armadilhas Comuns

| Armadilha | âŒ Errado | âœ… Correto |
|-----------|----------|---------|
| **localStorage** | Armazenar transaÃ§Ãµes | Usar Firebase Realtime DB |
| **Memory Leak** | NÃ£o fazer unsubscribe | `return () => unsubscribe()` no useEffect |
| **Roteamento** | BrowserRouter | HashRouter (Android WebView) |
| **DescriÃ§Ãµes** | "SalÃ¡rio" e " SalÃ¡rio" | "SalÃ¡rio" sempre igual |
| **MÃªs anterior** | Hardcodar "january" | Usar `monthsLowercase[index]` |
| **Email** | Ignorar verificaÃ§Ã£o | Implementar obrigatoriamente |
| **Firestore** | Usar Firestore | Usar Realtime Database apenas |

---

## ğŸ“Š Funcionalidades Especiais

### ğŸ’š DÃ­zimo AutomÃ¡tico

- Marque transaÃ§Ãµes de crÃ©dito como "dÃ­zimo"
- Calcula automaticamente 10% do total de receitas marcadas
- RelatÃ³rio consolidado de dÃ­zimos acumulados (mensal e anual)
- Perfeito para controle de contribuiÃ§Ãµes religiosas

### ğŸ“ˆ Investimentos com RecorrÃªncia

- **Aportes:** DÃ©bitos para aplicaÃ§Ãµes mensais
- **Resgates:** CrÃ©ditos para saques
- **RecorrÃªncia:** AutomÃ¡tico mensal (ex: aporte todo mÃªs)
- **Simulador:** ProjeÃ§Ã£o com taxa anual configurÃ¡vel
- **IntegraÃ§Ã£o:** Saldo agregado ao final do mÃªs

### ğŸ’¼ Calculadora de SalÃ¡rio

- Calcula salÃ¡rio lÃ­quido a partir do bruto
- Simula descontos automÃ¡ticos (INSS, IR)
- Tabelas atualizadas periodicamente
- Ferramenta auxiliar para planejamento

---

## ğŸ› Troubleshooting

| Problema | Causa | SoluÃ§Ã£o |
|----------|-------|--------|
| **Dados nÃ£o sincronizam** | ConexÃ£o Firebase | Verificar internet, UID do usuÃ¡rio, Firebase rules |
| **RelatÃ³rio nÃ£o agrupa** | DescriÃ§Ãµes inconsistentes | Usar EXATAMENTE a mesma descriÃ§Ã£o todos os meses |
| **Email nÃ£o chega** | Spam folder | Verificar pasta de spam, reenviar link |
| **Importar OFX nÃ£o funciona** | Formato incompatÃ­vel | Verificar banco, tentar outro formato |
| **GrÃ¡ficos em branco** | Sem dados no mÃªs | Adicionar transaÃ§Ãµes, verificar console |
| **App congela** | Muitos dados/listeners | Fechar abas extras, limpar cache |
| **Cloud Functions erro** | Config nÃ£o aplicada | Rodar `firebase functions:config:get` |

---

## ğŸ¯ Recursos & DocumentaÃ§Ã£o

- **Firebase Console:** https://console.firebase.google.com
- **Groq API:** https://console.groq.com/keys
- **Vercel Deploy:** https://vercel.com
- **GitHub:** https://github.com/marcosnunes/saldofacil-react
- **Copilot Instructions:** `.github/copilot-instructions.md` (para IA builders)

---

## ğŸ“ Suporte & ContribuiÃ§Ã£o

- ğŸ› **Reportar bug:** Abra uma [Issue](https://github.com/marcosnunes/saldofacil-react/issues)
- ğŸ’¡ **SugestÃ£o:** Descreva sua ideia na aba Discussions
- ğŸ¤ **Contribuir:** Pull requests bem-vindas! (Veja main branch)
- ğŸ“§ **Contato:** marcos.lindolpho@gmail.com

---

## ğŸ“„ LicenÃ§a

Projeto privado. CÃ³digo disponÃ­vel para fins educacionais e pessoais.

---

## ğŸš€ Principais Diferenciais

| Feature | Status |
|---------|--------|
| âœ… Sem anÃºncios | ExperiÃªncia limpa |
| âœ… Dados em nuvem | Multi-dispositivo |
| âœ… IA Integrada | Groq Llama 3.1 |
| âœ… ExportaÃ§Ã£o Universal | PDF + Excel |
| âœ… CÃ³digo limpo | Context API, Hooks |
| âœ… Mobile First | Android + iOS/Web |
| âœ… PWA Ready | InstalÃ¡vel no desktop |
| âœ… Open Source | CÃ³digo no GitHub |

---

## âš¡ Requisitos de Conectividade

**O Saldo FÃ¡cil REQUER INTERNET para operar:**

```
ğŸŒ AutenticaÃ§Ã£o     â†’ Login/logout, criaÃ§Ã£o de conta
ğŸ’¾ SincronizaÃ§Ã£o   â†’ Todos os lanÃ§amentos (Firebase)
ğŸ“Š IA              â†’ AnÃ¡lise com Groq
ğŸ’± Taxas           â†’ ConversÃ£o de moedas em tempo real
ğŸ”„ AtualizaÃ§Ãµes    â†’ Sincronizar dados entre dispositivos
```

**RecomendaÃ§Ãµes:**
- Use WiFi ou 4G/5G quando possÃ­vel
- Evite modo aviÃ£o durante uso
- Para internet instÃ¡vel, acesse em horÃ¡rios de melhor sinal
- PWA permite acesso rÃ¡pido se jÃ¡ carregou antes (sem dados)

**Nota Futura:** VersÃ£o offline com sincronizaÃ§Ã£o serÃ¡ adicionada em atualizaÃ§Ãµes futuras.

---

## ğŸ“Š EstatÃ­sticas do Projeto

- **Stack:** React 19 + Vite 7 + Firebase
- **Tamanho (gzipped):** ~150KB (com lazy-loading)
- **Bundle chunks:** Firebase (150KB), Recharts (80KB), Vendor (React)
- **Performance:** Lighthouse 90+ em desktop
- **Browser Support:** Chrome, Firefox, Safari 12+
- **UsuÃ¡rios ativos:** DisponÃ­vel em Play Store desde 2024

---

**Desenvolvido com â¤ï¸ por [Marcos Nunes](https://github.com/marcosnunes)**

**VersÃ£o:** 4.0  
**Ãšltima atualizaÃ§Ã£o:** Janeiro 2026  
**Status:** âœ… ProduÃ§Ã£o | âœ… Testado | âœ… Suportado Regularmente
